<div class="friends-container w-100 h-100 d-flex flex-column p-3">

  <!-- ðŸ”¹ Header -->
  <div class="d-flex align-items-center justify-content-between border-bottom pb-3 mb-3">
    <h4 class="m-0 fw-bold text-primary">Friends</h4>
    <button class="btn btn-outline-secondary rounded-circle" (click)="backHome()">
      <i class="fa-solid fa-house"></i>
    </button>
  </div>

  <!-- ðŸ”¸ Friend Requests Section -->
  <div *ngIf="friendRequests?.length > 0" class="friend-requests mb-4">
    <h5 class="fw-semibold text-secondary mb-3">Friend Requests</h5>

    <div class="row g-3">
      <div class="col-lg-4 col-md-6 col-sm-10" *ngFor="let req of friendRequests; let i = index">
        <div class="friend-card p-3 text-center shadow-sm border border-light rounded-4">
          <div
            class="user-image mx-auto position-relative rounded-circle border"
            [style.backgroundImage]="'url(' + req.from.profileImage + ')'">
          </div>

          <h6 class="mt-3 fw-semibold">{{ req.from.userName }}</h6>
          <p class="small text-muted mb-3">wants to add you as a friend</p>

          <div class="d-flex justify-content-center gap-2">
            <button class="btn btn-success btn-sm px-3 fw-semibold" (click)="acceptRequest(req.from._id)">
              Accept
            </button>
            <button class="btn btn-outline-danger btn-sm px-3 fw-semibold" (click)="rejectRequest(req.from._id)">
              Decline
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ðŸ”¸ Friends List Section -->
  <div class="friends-list flex-grow-1 overflow-auto">
    <h5 class="fw-semibold text-secondary mb-3">Your Friends</h5>

    <div class="row g-4  m-0">
      <div class="col-lg-4 col-md-6 col-sm-10" *ngFor="let item of friends; let i = index">
        <div class="friend-card p-3 text-center shadow-sm rounded-4 border border-light">
          <div
            class="user-image mx-auto position-relative rounded-circle border"
            [style.backgroundImage]="'url(' + item.profileImage + ')'">
            <span
              class="status-dot position-absolute rounded-circle"
              [ngClass]="{ 'bg-success': item.isOnline, 'bg-secondary': !item.isOnline }">
            </span>
          </div>

          <h5 class="mt-3 fw-semibold">{{ item.userName }}</h5>
          <p class="small text-muted mb-2">{{ item.time }}</p>

          <div class="text-start small mb-3">
            <p class="m-0"><i class="fa-solid fa-user-group me-2"></i>{{ item.friends?.length }} friends</p>
            <p class="m-0"><i class="fa-solid fa-users me-2"></i>{{ item.friends?.length }} mutual friends</p>
          </div>

          <div class="d-flex justify-content-center gap-3">
            <button class="btn btn-danger btn-sm px-3 fw-semibold" (click)="blockUser(item._id)">Block</button>
            <button class="btn btn-outline-primary btn-sm px-3 fw-semibold">Remove</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
